parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ZX4Z":[function(require,module,exports) {
"use strict";var e=1;function t(){return(e=(9301*e+49297)%233280)/233280}function n(t){e=t}module.exports={nextValue:t,seed:n};
},{}],"BhiS":[function(require,module,exports) {
"use strict";var e,t,r,n=require("./random/random-from-seed"),u="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function o(){r=!1}function i(t){if(t){if(t!==e){if(t.length!==u.length)throw new Error("Custom alphabet for shortid must be "+u.length+" unique characters. You submitted "+t.length+" characters: "+t);var r=t.split("").filter(function(e,t,r){return t!==r.lastIndexOf(e)});if(r.length)throw new Error("Custom alphabet for shortid must be "+u.length+" unique characters. These characters were not unique: "+r.join(", "));e=t,o()}}else e!==u&&(e=u,o())}function s(t){return i(t),e}function a(e){n.seed(e),t!==e&&(o(),t=e)}function h(){e||i(u);for(var t,r=e.split(""),o=[],s=n.nextValue();r.length>0;)s=n.nextValue(),t=Math.floor(s*r.length),o.push(r.splice(t,1)[0]);return o.join("")}function f(){return r||(r=h())}function l(e){return f()[e]}function c(){return e||u}module.exports={get:c,characters:s,seed:a,lookup:l,shuffled:f};
},{"./random/random-from-seed":"ZX4Z"}],"6l1L":[function(require,module,exports) {
"use strict";var o,t="object"==typeof window&&(window.crypto||window.msCrypto);o=t&&t.getRandomValues?function(o){return t.getRandomValues(new Uint8Array(o))}:function(o){for(var t=[],r=0;r<o;r++)t.push(Math.floor(256*Math.random()));return t},module.exports=o;
},{}],"pjkr":[function(require,module,exports) {
module.exports=function(t,r,e){for(var a=(2<<Math.log(r.length-1)/Math.LN2)-1,h=Math.ceil(1.6*a*e/r.length),l="";;)for(var n=t(h),o=0;o<h;o++){var f=n[o]&a;if(r[f]&&(l+=r[f]).length===e)return l}};
},{}],"9ZVM":[function(require,module,exports) {
"use strict";var r=require("./alphabet"),e=require("./random/random-byte"),t=require("nanoid/format");function a(a){for(var o,n=0,u="";!o;)u+=t(e,r.get(),1),o=a<Math.pow(16,n+1),n++;return u}module.exports=a;
},{"./alphabet":"BhiS","./random/random-byte":"6l1L","nanoid/format":"pjkr"}],"HW8S":[function(require,module,exports) {
"use strict";var e,r,t=require("./generate"),a=require("./alphabet"),o=1459707606518,u=6;function n(a){var n="",i=Math.floor(.001*(Date.now()-o));return i===r?e++:(e=0,r=i),n+=t(u),n+=t(a),e>0&&(n+=t(e)),n+=t(i)}module.exports=n;
},{"./generate":"9ZVM","./alphabet":"BhiS"}],"DKYU":[function(require,module,exports) {
"use strict";var e=require("./alphabet");function t(t){return!(!t||"string"!=typeof t||t.length<6)&&!new RegExp("[^"+e.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(t)}module.exports=t;
},{"./alphabet":"BhiS"}],"AzWI":[function(require,module,exports) {
"use strict";module.exports=0;
},{}],"XQNt":[function(require,module,exports) {
"use strict";var e=require("./alphabet"),r=require("./build"),u=require("./is-valid"),t=require("./util/cluster-worker-id")||0;function o(r){return e.seed(r),module.exports}function s(e){return t=e,module.exports}function i(r){return void 0!==r&&e.characters(r),e.shuffled()}function d(){return r(t)}module.exports=d,module.exports.generate=d,module.exports.seed=o,module.exports.worker=s,module.exports.characters=i,module.exports.isValid=u;
},{"./alphabet":"BhiS","./build":"HW8S","./is-valid":"DKYU","./util/cluster-worker-id":"AzWI"}],"JEO+":[function(require,module,exports) {
"use strict";module.exports=require("./lib/index");
},{"./lib/index":"XQNt"}],"Focm":[function(require,module,exports) {
var e,t,a=require("shortid"),n=document.querySelector(".additem-input"),i=document.querySelector(".list-container"),r=document.querySelector(".filter"),s=document.querySelector(".overlay"),c="",o=0,d=function(e){return document.createElement(e)},l=function(e,t){return Object.keys(t).forEach(function(a){e.setAttribute(a,t[a])}),e},u=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t.shift();t.forEach(function(e){n.appendChild(e)})},h=function(e){var t=e.currentTarget,a=t.parentNode,n=t.nextElementSibling,i=t.querySelector(".list__tick");"true"===t.dataset.checked?B([a.id,"checked","false"]).then(function(){t.dataset.checked="false","Completed"===c&&v(null,"Completed",!0),n.classList.toggle("taskdone"),i.classList.toggle("hide")}):B([a.id,"checked","true"]).then(function(){t.dataset.checked="true","Active"===c&&v(null,"Active",!0),n.classList.toggle("taskdone"),i.classList.toggle("hide")})},v=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a||t.target.textContent;if(a||t.target.classList.contains("filter__item")){c=r;var s=Array.from(i.children);switch(n||(e&&e.classList.remove("tabstyle"),t.target.classList.add("tabstyle"),e=t.target),r){case"All":for(var o=0,d=s;o<d.length;o++){var l=d[o];l.classList.contains("hide")&&l.classList.remove("hide")}break;case"Active":for(var u=0,h=s;u<h.length;u++){var v=h[u];"true"===v.querySelector(".list__checkbox").dataset.checked?v.classList.add("hide"):v.classList.remove("hide")}break;case"Completed":for(var f=0,_=s;f<_.length;f++){var g=_[f];"false"===g.querySelector(".list__checkbox").dataset.checked?g.classList.add("hide"):g.classList.remove("hide")}}}},f=function(e,t){var a=d("div");a.innerHTML="&#10003","true"===t?a.setAttribute("class","list__tick"):a.setAttribute("class","list__tick hide"),e.appendChild(a)},_=function(e,t,a,n){var i=a.querySelector(".list__checkbox"),r=a.querySelector(".list__deleteButton"),s=a.querySelector(".list__task"),c=a.querySelector(".note"),o=e.value;1===n&&(o=t),B([a.id,"text",o]).then(function(){s.innerText=o,s.classList.toggle("hide"),r.classList.toggle("hide"),i.classList.toggle("hide"),c.classList.toggle("hide"),a.removeChild(e)})},g=function(e,t,a){var n=0;if(!e.target.closest(".list__edit")){""===a.value.trim()&&(n=1);var i=a.parentNode;i&&_(a,t,i,n)}},m=function(e,t){var a=0;if("Enter"===e.key){var n=e.target;""===n.value.trim()&&(a=1);var i=n.parentNode;_(n,t,i,a)}},L=function(e){if("P"===e.target.tagName){var t=e.target.parentNode,a=e.target,n=t.querySelector(".list__checkbox"),i=t.querySelector(".list__deleteButton"),r=t.querySelector(".note");a.classList.toggle("hide"),i.classList.toggle("hide"),n.classList.toggle("hide"),r.classList.toggle("hide");var s=d("input");l(s,{class:"list__edit",value:a.innerText,type:"text"}),t.appendChild(s),s.focus();var c=s.value;s.value="",s.value=c,s.addEventListener("keydown",function(e){return m(e,c)}),document.addEventListener("click",function(e){return g(e,c,s)})}},k=function(e){var t=e.target.parentNode,a=e.target,n=t.querySelector(".modal__saveButton"),i=t.querySelector(".modal__textarea"),r=t.querySelector(".modal__text");i.classList.remove("hide"),i.focus(),i.value="",i.value=r.textContent,n.classList.remove("hide"),r.classList.add("hide"),a.classList.add("hide")},y=function(e){var t=e.target.parentNode,a=t.parentNode.parentNode,n=e.target,i=t.querySelector(".modal__editButton"),r=t.querySelector(".modal__textarea"),s=t.querySelector(".modal__text");""!==r.value.trim()&&B([a.id,"note",r.value]).then(function(){s.textContent=r.value,r.classList.add("hide"),n.classList.add("hide"),s.classList.remove("hide"),i.classList.remove("hide")}).catch(function(e){alert("Could not edit note. Please retry")})},p=function(e){var a=e.target;if(e.target.classList.contains("note")){var n=a.querySelector(".modal");t=n.id,n.classList.remove("hide");var i=n.querySelector(".modal__textarea");i.classList.contains("hide")||i.focus(),s.classList.remove("hide")}},b=function(e,t){var a="",n="",i="",r="";""===t?(i="hide",r="hide"):(a="hide",n="hide");var s=d("textarea");s.setAttribute("class","modal__textarea ".concat(a));var c=d("button");c.setAttribute("class","modal__button modal__saveButton ".concat(n)),c.textContent="SAVE",c.addEventListener("click",y);var o=d("button");o.setAttribute("class","modal__button modal__editButton ".concat(r)),o.textContent="EDIT",o.addEventListener("click",k);var l=d("p");""!==t&&(l.textContent=t),l.setAttribute("class","modal__text ".concat(i)),u(e,s,l,c,o)},S=function(e){var t=d("div");return t.setAttribute("class","modal hide"),t.setAttribute("id",a.generate()),b(t,e),t},x=function(e){var t=d("div");t.setAttribute("class","note"),t.innerText="+",t.addEventListener("click",p);var a=S(e);return t.appendChild(a),t},E=function(e){var t=d("div");return t.dataset.checked=e.checked,l(t,{class:"list__checkbox"}),f(t,e.checked),t.addEventListener("click",h),t},q=function(e){var t=d("p");t.innerText=e.text;var a="list__task";return"true"===e.checked&&(a+=" taskdone"),l(t,{class:a}),t},C=function(e){var t=d("div");return t.innerHTML="&#9747",l(t,{class:"list__deleteButton"}),t.addEventListener("click",function(){j(e.id).then(function(){i.removeChild(e),0===--o&&r.classList.add("hide")}).catch(function(e){alert("delete failed ".concat(e))})}),t},A=function(e){var t=d("li");l(t,{class:"list",id:e.taskid});var a=E(e),n=q(e),s=C(t),c=x(e.note);t.addEventListener("dblclick",L),u(t,a,n,c,s),i.appendChild(t),o++,r.classList.contains("hide")&&r.classList.remove("hide")},T=function(e){if("Enter"===e.key){var t=n.value;if(""!==t.trim()){n.value="";var i={text:t,checked:"false",taskid:a.generate(),note:""};O(i).then(function(){A(i),"Completed"===c&&v(null,"Completed",!0)}).catch(function(e){return alert("add task failed with error ".concat(e))})}}},N=function(e){var a=document.getElementById(t),n=e.target;a.classList.add("hide"),n.classList.add("hide")},B=function(e){return fetch("data/edit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},O=function(e){return fetch("/data/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},j=function(e){return fetch("/data/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskid:e})})},w=function(){return fetch("/data")};w().then(function(e){return e.json()}).then(function(e){e.forEach(function(e){return A(e)})}),s.addEventListener("click",N),r.addEventListener("click",v),n.addEventListener("keydown",T);
},{"shortid":"JEO+"}]},{},["Focm"], null)
//# sourceMappingURL=todo-with-mongo.8983c6a7.js.map